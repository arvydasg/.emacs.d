# -*- mode: snippet -*-
# name: post
# key: post
# --

const END_POINT = "https://olive-bead-glazer.glitch.me";
const submitForm = document.querySelector("form");

const postData = async (car) => {
    const alertMsg = document.getElementById("alert");
    try {
        const response = await fetch(END_POINT, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(car),
        });
        if (response.ok) {
            alertMsg.innerHTML = "Data successfully sent!";
        }
    } catch (error) {
            // insert allert message here
    }
};


const addCar = (event) => {
    event.preventDefault();
    const carBrandInput = document.getElementById("car-brand");
    const carModelInput = document.getElementById("car-model");
    const car = {
        brand: carBrandInput.value,
        model: carModelInput.value,
    };
    postData(car);
};

submitForm.addEventListener("submit", addCar);